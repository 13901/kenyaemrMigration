<?xml version="1.0" encoding="UTF-8"?>
<transformation>
  <info>
    <name>Transform_tb_regimen_history</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>/</directory>
    <parameters>
      <parameter>
        <name>mysql_tr</name>
        <default_value/>
        <description/>
      </parameter>
    </parameters>
    <log>
      <trans-log-table>
        <connection/>
        <schema/>
        <table/>
        <size_limit_lines/>
        <interval/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STATUS</id>
          <enabled>Y</enabled>
          <name>STATUS</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
          <subject/>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
          <subject/>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
          <subject/>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
          <subject/>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
          <subject/>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
          <subject/>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>STARTDATE</id>
          <enabled>Y</enabled>
          <name>STARTDATE</name>
        </field>
        <field>
          <id>ENDDATE</id>
          <enabled>Y</enabled>
          <name>ENDDATE</name>
        </field>
        <field>
          <id>LOGDATE</id>
          <enabled>Y</enabled>
          <name>LOGDATE</name>
        </field>
        <field>
          <id>DEPDATE</id>
          <enabled>Y</enabled>
          <name>DEPDATE</name>
        </field>
        <field>
          <id>REPLAYDATE</id>
          <enabled>Y</enabled>
          <name>REPLAYDATE</name>
        </field>
        <field>
          <id>LOG_FIELD</id>
          <enabled>Y</enabled>
          <name>LOG_FIELD</name>
        </field>
        <field>
          <id>EXECUTING_SERVER</id>
          <enabled>N</enabled>
          <name>EXECUTING_SERVER</name>
        </field>
        <field>
          <id>EXECUTING_USER</id>
          <enabled>N</enabled>
          <name>EXECUTING_USER</name>
        </field>
        <field>
          <id>CLIENT</id>
          <enabled>N</enabled>
          <name>CLIENT</name>
        </field>
      </trans-log-table>
      <perf-log-table>
        <connection/>
        <schema/>
        <table/>
        <interval/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>SEQ_NR</id>
          <enabled>Y</enabled>
          <name>SEQ_NR</name>
        </field>
        <field>
          <id>LOGDATE</id>
          <enabled>Y</enabled>
          <name>LOGDATE</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STEPNAME</id>
          <enabled>Y</enabled>
          <name>STEPNAME</name>
        </field>
        <field>
          <id>STEP_COPY</id>
          <enabled>Y</enabled>
          <name>STEP_COPY</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>INPUT_BUFFER_ROWS</id>
          <enabled>Y</enabled>
          <name>INPUT_BUFFER_ROWS</name>
        </field>
        <field>
          <id>OUTPUT_BUFFER_ROWS</id>
          <enabled>Y</enabled>
          <name>OUTPUT_BUFFER_ROWS</name>
        </field>
      </perf-log-table>
      <channel-log-table>
        <connection/>
        <schema/>
        <table/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>LOGGING_OBJECT_TYPE</id>
          <enabled>Y</enabled>
          <name>LOGGING_OBJECT_TYPE</name>
        </field>
        <field>
          <id>OBJECT_NAME</id>
          <enabled>Y</enabled>
          <name>OBJECT_NAME</name>
        </field>
        <field>
          <id>OBJECT_COPY</id>
          <enabled>Y</enabled>
          <name>OBJECT_COPY</name>
        </field>
        <field>
          <id>REPOSITORY_DIRECTORY</id>
          <enabled>Y</enabled>
          <name>REPOSITORY_DIRECTORY</name>
        </field>
        <field>
          <id>FILENAME</id>
          <enabled>Y</enabled>
          <name>FILENAME</name>
        </field>
        <field>
          <id>OBJECT_ID</id>
          <enabled>Y</enabled>
          <name>OBJECT_ID</name>
        </field>
        <field>
          <id>OBJECT_REVISION</id>
          <enabled>Y</enabled>
          <name>OBJECT_REVISION</name>
        </field>
        <field>
          <id>PARENT_CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>PARENT_CHANNEL_ID</name>
        </field>
        <field>
          <id>ROOT_CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>ROOT_CHANNEL_ID</name>
        </field>
      </channel-log-table>
      <step-log-table>
        <connection/>
        <schema/>
        <table/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STEPNAME</id>
          <enabled>Y</enabled>
          <name>STEPNAME</name>
        </field>
        <field>
          <id>STEP_COPY</id>
          <enabled>Y</enabled>
          <name>STEP_COPY</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>LOG_FIELD</id>
          <enabled>N</enabled>
          <name>LOG_FIELD</name>
        </field>
      </step-log-table>
      <metrics-log-table>
        <connection/>
        <schema/>
        <table/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>METRICS_DATE</id>
          <enabled>Y</enabled>
          <name>METRICS_DATE</name>
        </field>
        <field>
          <id>METRICS_CODE</id>
          <enabled>Y</enabled>
          <name>METRICS_CODE</name>
        </field>
        <field>
          <id>METRICS_DESCRIPTION</id>
          <enabled>Y</enabled>
          <name>METRICS_DESCRIPTION</name>
        </field>
        <field>
          <id>METRICS_SUBJECT</id>
          <enabled>Y</enabled>
          <name>METRICS_SUBJECT</name>
        </field>
        <field>
          <id>METRICS_TYPE</id>
          <enabled>Y</enabled>
          <name>METRICS_TYPE</name>
        </field>
        <field>
          <id>METRICS_VALUE</id>
          <enabled>Y</enabled>
          <name>METRICS_VALUE</name>
        </field>
      </metrics-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit>100</step_performance_capturing_size_limit>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
    <created_user>-</created_user>
    <created_date>2019/12/16 15:57:10.022</created_date>
    <modified_user>-</modified_user>
    <modified_date>2019/12/16 15:57:10.022</modified_date>
    <key_for_session_key>H4sIAAAAAAAAAAMAAAAAAAAAAAA=</key_for_session_key>
    <is_key_private>N</is_key_private>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>mysql_tr</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>JNDI</access>
    <database>mysql_tr</database>
    <port>3306</port>
    <username/>
    <password>Encrypted </password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute>
        <code>FORCE_IDENTIFIERS_TO_LOWERCASE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>FORCE_IDENTIFIERS_TO_UPPERCASE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>IS_CLUSTERED</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>PORT_NUMBER</code>
        <attribute>3306</attribute>
      </attribute>
      <attribute>
        <code>PRESERVE_RESERVED_WORD_CASE</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>QUOTE_ALL_FIELDS</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>STREAM_RESULTS</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>SUPPORTS_BOOLEAN_DATA_TYPE</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>SUPPORTS_TIMESTAMP_DATA_TYPE</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>USE_POOLING</code>
        <attribute>N</attribute>
      </attribute>
    </attributes>
  </connection>
  <order>
  </order>
  <step>
    <name>load_tr_tb_regimen_history</name>
    <type>ExecSQL</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>mysql_tr</connection>
    <execute_each_row>N</execute_each_row>
    <single_statement>N</single_statement>
    <replace_variables>N</replace_variables>
    <quoteString>N</quoteString>
    <sql>-- 16. TB Regimen History transformed table
DROP TABLE IF EXISTS migration_tr.tr_tb_regimen_history;
CREATE TABLE migration_tr.tr_tb_regimen_history
    select
      Person_Id,
      Encounter_Date,
      Encounter_ID,
      (case Program
       when "ART" then 1255
       when "TB" then 1268
       when "PMTCT" then 1255
       when "PEP" then 1691
       when "PREP" then 165003
       when "HBV" then 111759
       when "Hepatitis B" then 111759
       when "Treatment" then 1255
       when "prophylaxis" then 1255
       when "Non-ART" then 5622 else NULL end)as Program,
      (case Drug_Event
       when "Start" then 1256
       when "Stop" then 1260
       when "Change" then 1259 else NULL end)as Drug_Event,
      (case Regimen_Name
       when "PM 8 SD Nevirapine (NVP)" then 80586
       when "PM1 AZT from 14Wks" then 86663
       when "TDF + 3TC + NVP"  then 162565
       when "PM 6 TDF + 3TC + NVP"  then 162565
       when "TDF + 3TC + NVP (children > 35kg)"  then 162565
       when "TDF + 3TC + EFV"  then 164505
       when "PM 9 TDF + 3TC + EFV"  then 164505
       when "AZT + 3TC + NVP"  then 1652
       when "PM2 NVP stat + AZT stat"  then 1652
       when "PM3 AZT + 3TC + NVP"  then 1652
       when "AZT + 3TC + EFV"  then 160124
       when "PM4 AZT + 3TC + EFV"  then 160124
       when "D4T + 3TC + NVP"  then 792
       when "D4T + 3TC + EFV"  then 160104
       when "TDF + 3TC + AZT"  then 164971
       when "AZT + 3TC + DTG"  then 164968
       when "TDF + 3TC + DTG"  then 164969
       when "ABC + 3TC + DTG"  then 164970
       when "AZT + 3TC + LPV/r"  then 162561
       when "AZT + 3TC + ATV/r"  then 164511
       when "AZT + 3TC + ATV/r (Adult PEP)"  then 164511
       when "PM 10 AZT + 3TC + ATV/r"  then 164511
       when "TDF + 3TC + LPV/r"  then 162201
       when "PM 7 TDF + 3TC + LPV/r"  then 162201
       when "TDF + 3TC + ATV/r"  then 164512
       when "TDF + 3TC + ATV/r (Adult PEP)"  then 164512
       when "PM 11 TDF + 3TC + ATV/r"  then 164512
       when "D4T + 3TC + LPV/r"  then 162560
       when "AZT + TDF + 3TC + LPV/r"  then 164972
       when "ETR + RAL + DRV + RTV"  then 164973
       when "ETR + TDF + 3TC + LPV/r"  then 164974
       when "ABC + 3TC + ATV/r"  then 165357
       when "ABC + 3TC + LPV/r"  then 162200
       when "ABC + 3TC + LPV/r (Paed PEP)"  then 162200
       when "ABC + 3TC + NVP"  then 162199
       when "ABC + 3TC + EFV"  then 162563
       when "AZT + 3TC + ABC"  then 817
       when "D4T + 3TC + ABC"  then 164975
       when "TDF + ABC + LPV/r"  then 162562
       when "ABC + DDI + LPV/r"  then 162559
       when "ABC + TDF + 3TC + LPV/r"  then 164976
       when "TDF+3TC" then 161364
       when "TDF + 3TC (PrEP)" then 161364
       when "TDF+FTC" then 104567
       when "TDF + FTC (PrEP)" then 104567
       when "DTG + DRV + RTV" then 164973
       when "DTG + DRV + RTV + ETV" then 164973
       when "RAL + DRV + RTV + ETV" then 164973
       when "RAL + other backbone ARVs" then 154378
       when "Any other 2nd line Paediatric regimens" then 162188
       when "Any other 2nd line Adult regimens" then 162188
       when "TDF" then 84795
       when "DTG" then 164967
       when "RHZE" then 1675
       when "RHZE" then 1675
       when "2SRHZE|4RHZE" then 1675
       when "RHZ"  then 768
       when "2RHZ|4rh"  then 768
       when "SRHZE"  then 1674
       when "RfbHZE"  then 164978
       when "RfbHZ"   then 164979
       when "SRfbHZE"  then 164980
       when "2SRHZE|1RHZE|5RHE"  then 164980
       when "S (1 gm vial)"  then 84360
       when "E" then 75948
       when "RH" then 1194
       when "2RHZE|10RH" then 1194
       when "2RHZE|4RH" then 1194
       when "RHE"  then 159851
       when "3RHZE|5RHE"  then 159851
       when "EH"  then 1108  else NULL end ) as Regimen_Name,
      #       (case Regimen_Line
      #        when "AdultARTFirstLine"   then 164506
      #        when "PMTCTHEIMotherRegimen"   then 164506
      #        when "PaedsARTFirstLine"   then 164507
      #        when "AdultARTSecondLine"  then 164513
      #        when "AdultThirdlineRegimen"  then 164513
      #        when "PaedsARTSecondLine"  then  164514
      #        when "PaedsThirdlineRegimen"  then  164514
      #        when "PaedsThirdlineRegimen"  then  164514
      #        when "PePRegimen"  then  164506
      #        when "PrEPRegimen"  then  164506
      #        when "OtherPREPRegimen"  then  164506
      #        when "PreferredPREPRegimen"  then  164506
      #        when "TBRegimen"  then  1111 else NULL end ) as Regimen_Line,
      Date_Started,
      # Date_Stopped,
      (case Regimen_Discontinued
       when "PM 8 SD Nevirapine (NVP)" then 80586
       when "PM1 AZT from 14Wks" then 86663
       when "TDF + 3TC + NVP"  then 162565
       when "PM 6 TDF + 3TC + NVP"  then 162565
       when "TDF + 3TC + NVP (children > 35kg)"  then 162565
       when "TDF + 3TC + EFV"  then 164505
       when "PM 9 TDF + 3TC + EFV"  then 164505
       when "AZT + 3TC + NVP"  then 1652
       when "PM2 NVP stat + AZT stat"  then 1652
       when "PM3 AZT + 3TC + NVP"  then 1652
       when "AZT + 3TC + EFV"  then 160124
       when "PM4 AZT + 3TC + EFV"  then 160124
       when "D4T + 3TC + NVP"  then 792
       when "D4T + 3TC + EFV"  then 160104
       when "TDF + 3TC + AZT"  then 164971
       when "AZT + 3TC + DTG"  then 164968
       when "TDF + 3TC + DTG"  then 164969
       when "ABC + 3TC + DTG"  then 164970
       when "AZT + 3TC + LPV/r"  then 162561
       when "AZT + 3TC + ATV/r"  then 164511
       when "AZT + 3TC + ATV/r (Adult PEP)"  then 164511
       when "PM 10 AZT + 3TC + ATV/r"  then 164511
       when "TDF + 3TC + LPV/r"  then 162201
       when "PM 7 TDF + 3TC + LPV/r"  then 162201
       when "TDF + 3TC + ATV/r"  then 164512
       when "TDF + 3TC + ATV/r (Adult PEP)"  then 164512
       when "PM 11 TDF + 3TC + ATV/r"  then 164512
       when "D4T + 3TC + LPV/r"  then 162560
       when "AZT + TDF + 3TC + LPV/r"  then 164972
       when "ETR + RAL + DRV + RTV"  then 164973
       when "ETR + TDF + 3TC + LPV/r"  then 164974
       when "ABC + 3TC + ATV/r"  then 165357
       when "ABC + 3TC + LPV/r"  then 162200
       when "ABC + 3TC + LPV/r (Paed PEP)"  then 162200
       when "ABC + 3TC + NVP"  then 162199
       when "ABC + 3TC + EFV"  then 162563
       when "AZT + 3TC + ABC"  then 817
       when "D4T + 3TC + ABC"  then 164975
       when "TDF + ABC + LPV/r"  then 162562
       when "ABC + DDI + LPV/r"  then 162559
       when "ABC + TDF + 3TC + LPV/r"  then 164976
       when "TDF+3TC" then 161364
       when "TDF + 3TC (PrEP)" then 161364
       when "TDF+FTC" then 104567
       when "TDF + FTC (PrEP)" then 104567
       when "DTG + DRV + RTV" then 164973
       when "DTG + DRV + RTV + ETV" then 164973
       when "RAL + DRV + RTV + ETV" then 164973
       when "RAL + other backbone ARVs" then 154378
       when "Any other 2nd line Paediatric regimens" then 162188
       when "Any other 2nd line Adult regimens" then 162188
       when "TDF" then 84795
       when "DTG" then 164967
       when "RHZE" then 1675
       when "RHZE" then 1675
       when "2SRHZE|4RHZE" then 1675
       when "RHZ"  then 768
       when "2RHZ|4rh"  then 768
       when "SRHZE"  then 1674
       when "RfbHZE"  then 164978
       when "RfbHZ"   then 164979
       when "SRfbHZE"  then 164980
       when "2SRHZE|1RHZE|5RHE"  then 164980
       when "S (1 gm vial)"  then 84360
       when "E" then 75948
       when "RH" then 1194
       when "2RHZE|10RH" then 1194
       when "2RHZE|4RH" then 1194
       when "RHE"  then 159851
       when "3RHZE|5RHE"  then 159851
       when "EH"  then 1108  else NULL end ) as Regimen_Discontinued,
      Date_Discontinued,
      Reason_Discontinued,
      (case RegimenSwitchTo
       when "PM 8 SD Nevirapine (NVP)" then 80586
       when "PM1 AZT from 14Wks" then 86663
       when "TDF + 3TC + NVP"  then 162565
       when "PM 6 TDF + 3TC + NVP"  then 162565
       when "TDF + 3TC + NVP (children > 35kg)"  then 162565
       when "TDF + 3TC + EFV"  then 164505
       when "PM 9 TDF + 3TC + EFV"  then 164505
       when "AZT + 3TC + NVP"  then 1652
       when "PM2 NVP stat + AZT stat"  then 1652
       when "PM3 AZT + 3TC + NVP"  then 1652
       when "AZT + 3TC + EFV"  then 160124
       when "PM4 AZT + 3TC + EFV"  then 160124
       when "D4T + 3TC + NVP"  then 792
       when "D4T + 3TC + EFV"  then 160104
       when "TDF + 3TC + AZT"  then 164971
       when "AZT + 3TC + DTG"  then 164968
       when "TDF + 3TC + DTG"  then 164969
       when "ABC + 3TC + DTG"  then 164970
       when "AZT + 3TC + LPV/r"  then 162561
       when "AZT + 3TC + ATV/r"  then 164511
       when "AZT + 3TC + ATV/r (Adult PEP)"  then 164511
       when "PM 10 AZT + 3TC + ATV/r"  then 164511
       when "TDF + 3TC + LPV/r"  then 162201
       when "PM 7 TDF + 3TC + LPV/r"  then 162201
       when "TDF + 3TC + ATV/r"  then 164512
       when "TDF + 3TC + ATV/r (Adult PEP)"  then 164512
       when "PM 11 TDF + 3TC + ATV/r"  then 164512
       when "D4T + 3TC + LPV/r"  then 162560
       when "AZT + TDF + 3TC + LPV/r"  then 164972
       when "ETR + RAL + DRV + RTV"  then 164973
       when "ETR + TDF + 3TC + LPV/r"  then 164974
       when "ABC + 3TC + ATV/r"  then 165357
       when "ABC + 3TC + LPV/r"  then 162200
       when "ABC + 3TC + LPV/r (Paed PEP)"  then 162200
       when "ABC + 3TC + NVP"  then 162199
       when "ABC + 3TC + EFV"  then 162563
       when "AZT + 3TC + ABC"  then 817
       when "D4T + 3TC + ABC"  then 164975
       when "TDF + ABC + LPV/r"  then 162562
       when "ABC + DDI + LPV/r"  then 162559
       when "ABC + TDF + 3TC + LPV/r"  then 164976
       when "TDF+3TC" then 161364
       when "TDF + 3TC (PrEP)" then 161364
       when "TDF+FTC" then 104567
       when "TDF + FTC (PrEP)" then 104567
       when "DTG + DRV + RTV" then 164973
       when "DTG + DRV + RTV + ETV" then 164973
       when "RAL + DRV + RTV + ETV" then 164973
       when "RAL + other backbone ARVs" then 154378
       when "Any other 2nd line Paediatric regimens" then 162188
       when "Any other 2nd line Adult regimens" then 162188
       when "TDF" then 84795
       when "DTG" then 164967
       when "RHZE" then 1675
       when "RHZE" then 1675
       when "2SRHZE|4RHZE" then 1675
       when "RHZ"  then 768
       when "2RHZ|4rh"  then 768
       when "SRHZE"  then 1674
       when "RfbHZE"  then 164978
       when "RfbHZ"   then 164979
       when "SRfbHZE"  then 164980
       when "2SRHZE|1RHZE|5RHE"  then 164980
       when "S (1 gm vial)"  then 84360
       when "E" then 75948
       when "RH" then 1194
       when "2RHZE|10RH" then 1194
       when "2RHZE|4RH" then 1194
       when "RHE"  then 159851
       when "3RHZE|5RHE"  then 159851
       when "EH"  then 1108  else NULL end ) as RegimenSwitchTo,
      (case CurrentRegimen
       when "PM 8 SD Nevirapine (NVP)" then 80586
       when "PM1 AZT from 14Wks" then 86663
       when "TDF + 3TC + NVP"  then 162565
       when "PM 6 TDF + 3TC + NVP"  then 162565
       when "TDF + 3TC + NVP (children > 35kg)"  then 162565
       when "TDF + 3TC + EFV"  then 164505
       when "PM 9 TDF + 3TC + EFV"  then 164505
       when "AZT + 3TC + NVP"  then 1652
       when "PM2 NVP stat + AZT stat"  then 1652
       when "PM3 AZT + 3TC + NVP"  then 1652
       when "AZT + 3TC + EFV"  then 160124
       when "PM4 AZT + 3TC + EFV"  then 160124
       when "D4T + 3TC + NVP"  then 792
       when "D4T + 3TC + EFV"  then 160104
       when "TDF + 3TC + AZT"  then 164971
       when "AZT + 3TC + DTG"  then 164968
       when "TDF + 3TC + DTG"  then 164969
       when "ABC + 3TC + DTG"  then 164970
       when "AZT + 3TC + LPV/r"  then 162561
       when "AZT + 3TC + ATV/r"  then 164511
       when "AZT + 3TC + ATV/r (Adult PEP)"  then 164511
       when "PM 10 AZT + 3TC + ATV/r"  then 164511
       when "TDF + 3TC + LPV/r"  then 162201
       when "PM 7 TDF + 3TC + LPV/r"  then 162201
       when "TDF + 3TC + ATV/r"  then 164512
       when "TDF + 3TC + ATV/r (Adult PEP)"  then 164512
       when "PM 11 TDF + 3TC + ATV/r"  then 164512
       when "D4T + 3TC + LPV/r"  then 162560
       when "AZT + TDF + 3TC + LPV/r"  then 164972
       when "ETR + RAL + DRV + RTV"  then 164973
       when "ETR + TDF + 3TC + LPV/r"  then 164974
       when "ABC + 3TC + ATV/r"  then 165357
       when "ABC + 3TC + LPV/r"  then 162200
       when "ABC + 3TC + LPV/r (Paed PEP)"  then 162200
       when "ABC + 3TC + NVP"  then 162199
       when "ABC + 3TC + EFV"  then 162563
       when "AZT + 3TC + ABC"  then 817
       when "D4T + 3TC + ABC"  then 164975
       when "TDF + ABC + LPV/r"  then 162562
       when "ABC + DDI + LPV/r"  then 162559
       when "ABC + TDF + 3TC + LPV/r"  then 164976
       when "TDF+3TC" then 161364
       when "TDF + 3TC (PrEP)" then 161364
       when "TDF+FTC" then 104567
       when "TDF + FTC (PrEP)" then 104567
       when "DTG + DRV + RTV" then 164973
       when "DTG + DRV + RTV + ETV" then 164973
       when "RAL + DRV + RTV + ETV" then 164973
       when "RAL + other backbone ARVs" then 154378
       when "Any other 2nd line Paediatric regimens" then 162188
       when "Any other 2nd line Adult regimens" then 162188
       when "TDF" then 84795
       when "DTG" then 164967
       when "RHZE" then 1675
       when "RHZE" then 1675
       when "2SRHZE|4RHZE" then 1675
       when "RHZ"  then 768
       when "2RHZ|4rh"  then 768
       when "SRHZE"  then 1674
       when "RfbHZE"  then 164978
       when "RfbHZ"   then 164979
       when "SRfbHZE"  then 164980
       when "2SRHZE|1RHZE|5RHE"  then 164980
       when "S (1 gm vial)"  then 84360
       when "E" then 75948
       when "RH" then 1194
       when "2RHZE|10RH" then 1194
       when "2RHZE|4RH" then 1194
       when "RHE"  then 159851
       when "3RHZE|5RHE"  then 159851
       when "EH"  then 1108  else NULL end ) as CurrentRegimen
    FROM migration_st.st_regimen_history where Date_Started != "" and Program = "TB" ;
</sql>
    <set_params>N</set_params>
    <insert_field/>
    <update_field/>
    <delete_field/>
    <read_field/>
    <arguments>
    </arguments>
    <attributes/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>160</xloc>
      <yloc>160</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step_error_handling>
  </step_error_handling>
  <slave-step-copy-partition-distribution>
  </slave-step-copy-partition-distribution>
  <slave_transformation>N</slave_transformation>
  <attributes/>
</transformation>
